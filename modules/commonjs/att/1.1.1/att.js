var tiRequire=require;
exports.ATT=function(){var A,w;(function(j){function k(m,c){var b,d,h,e,u,v,g,t,f,n=c&&c.split("/"),r=a.map,i=r&&r["*"]||{};if(m&&"."===m.charAt(0))if(c){n=n.slice(0,n.length-1);m=n.concat(m.split("/"));for(t=0;t<m.length;t+=1)if(b=m[t],"."===b)m.splice(t,1),t-=1;else if(".."===b)if(1===t&&(".."===m[2]||".."===m[0]))break;else 0<t&&(m.splice(t-1,2),t-=2);m=m.join("/")}else 0===m.indexOf("./")&&(m=m.substring(2));if((n||i)&&r){b=m.split("/");for(t=b.length;0<t;t-=1){d=b.slice(0,t).join("/");if(n)for(f=
n.length;0<f;f-=1)if(h=r[n.slice(0,f).join("/")])if(h=h[d]){e=h;u=t;break}if(e)break;!v&&i&&i[d]&&(v=i[d],g=t)}!e&&v&&(e=v,u=g);e&&(b.splice(0,u,e),m=b.join("/"))}return m}function o(a,c){return function(){return g.apply(j,h.call(arguments,0).concat([a,c]))}}function i(a){return function(c){return k(c,a)}}function l(a){return function(c){e[a]=c}}function q(a){if(c.call(d,a)){var h=d[a];delete d[a];b[a]=!0;f.apply(j,h)}if(!c.call(e,a)&&!c.call(b,a))throw Error("No "+a);return e[a]}function s(a){var c,
b=a?a.indexOf("!"):-1;-1<b&&(c=a.substring(0,b),a=a.substring(b+1,a.length));return[c,a]}function p(c){return function(){return a&&a.config&&a.config[c]||{}}}var f,g,n,r,e={},d={},a={},b={},c=Object.prototype.hasOwnProperty,h=[].slice;n=function(a,c){var b,d=s(a),h=d[0],a=d[1];h&&(h=k(h,c),b=q(h));h?a=b&&b.normalize?b.normalize(a,i(c)):k(a,c):(a=k(a,c),d=s(a),h=d[0],a=d[1],h&&(b=q(h)));return{f:h?h+"!"+a:a,n:a,pr:h,p:b}};r={require:function(a){return o(a)},exports:function(a){var c=e[a];return"undefined"!==
typeof c?c:e[a]={}},module:function(a){return{id:a,uri:"",exports:e[a],config:p(a)}}};f=function(a,h,g,f){var i,k,u,v,x=[],t,f=f||a;if("function"===typeof g){h=!h.length&&g.length?["require","exports","module"]:h;for(v=0;v<h.length;v+=1)if(u=n(h[v],f),k=u.f,"require"===k)x[v]=r.require(a);else if("exports"===k)x[v]=r.exports(a),t=!0;else if("module"===k)i=x[v]=r.module(a);else if(c.call(e,k)||c.call(d,k)||c.call(b,k))x[v]=q(k);else if(u.p)u.p.load(u.n,o(f,!0),l(k),{}),x[v]=e[k];else throw Error(a+
" missing "+k);h=g.apply(e[a],x);if(a)if(i&&i.exports!==j&&i.exports!==e[a])e[a]=i.exports;else if(h!==j||!t)e[a]=h}else a&&(e[a]=g)};A=g=function(c,b,h,d,e){if("string"===typeof c)return r[c]?r[c](b):q(n(c,b).f);c.splice||(a=c,b.splice?(c=b,b=h,h=null):c=j);b=b||function(){};"function"===typeof h&&(h=d,d=e);d?f(j,c,b,h):setTimeout(function(){f(j,c,b,h)},4);return g};g.config=function(c){a=c;a.deps&&g(a.deps,a.callback);return g};w=function(a,b,h){b.splice||(h=b,b=[]);!c.call(e,a)&&!c.call(d,a)&&
(d[a]=[a,b,h])};w.amd={jQuery:!0}})();w("../lib/almond",function(){});w("att/util",["require","exports","module"],function(j,k){function o(d,a,b){if("object"===typeof d&&null!==d){var c=b||d;if(d.forEach){if(d.every){var h;d.every(function(){h=a.apply(this,arguments);return void 0!==h},c);return h}d.forEach.call(d,a,b)}else for(var e in d)if(d.hasOwnProperty(e)&&(h=a.call(c,d[e],e,d)))return h}}function i(d){f.call(arguments,1).reverse().forEach(function(a){o(a,function(a,c){d[c]=a})});return d}function l(d,
a,b){var c={};a||(a={});o(d,function(h,d){if(void 0!==h){var e;e=a[d];var g=h,f=typeof g;"string"===f||"function"===f?g={backup:g}:"boolean"===f&&(g={required:g});!e&&g.backup&&(f=typeof g.backup,"function"===f?e=g.backup(b,g):"string"===f&&(e=g.backup));g.postProcess&&(e=g.postProcess(e,b,g));e=e||"";g.prefix&&(e=g.prefix+e);g.suffix&&(e+=g.suffix);if(!e&&g.required)throw Error("Required parameter"+(d?' "'+d+'"':"")+" is undefined");g.validate&&g.validate(e,b,g);null===e||void 0===e||""===e||(c[d]=
e)}});return c}function q(d,a,b){if("object"!==typeof d)return"";var c=[],h="string"===typeof b?b:q.defaultAssignment;o(d,function(b,d){null===b||void 0===b||""===b||(Array.isArray(b)?c.push(q.stringifyArray(d,b,a,h)):c.push(encodeURIComponent(d)+h+encodeURIComponent(b)))});return 0===c.length?"":c.join("string"===typeof a?a:q.defaultDelimiter)}function s(d,a,b){var c={},h="string"===typeof b?b:q.defaultAssignment;d.split("string"===typeof a?a:q.defaultDelimiter).forEach(function(a){var b=a.split(h);
if(2===b.length){var a=decodeURIComponent(b[0]),b=decodeURIComponent(b[1]),d=c[a];d?Array.isArray(d)?d.push(b):c[a]=[d,b]:c[a]=b}});return c}function p(d,a){if(null==d)return d;var b=a.match(/(.*?)\.(.*)/);return!b?d[a]:p(d[b[1]],b[2])}var f=Array.prototype.slice,g=Function.prototype.apply;k.forEach=o;k.copyObjTo=i;k.buildParams=l;var n=k.queryString=k.qs={};q.stringifyArray=function(d,a,b,c){var h=[],e="string"===typeof c?c:q.defaultAssignment;a.forEach(function(a){h.push(encodeURIComponent(d)+e+
encodeURIComponent(a))});return h.join("string"===typeof b?b:q.defaultDelimiter)};q.defaultDelimiter="&";q.defaultAssignment="=";n.stringify=q;s.defaultDelimiter="&";s.defaultAssignment="=";n.parse=s;n.buildFromConfig=function(d,a,b){return n.stringify(l(d,a,b))};k.getFromObject=function(d,a){return p(d,a+"")};k.arrayToHash=function(){return f.call(arguments).reduce(function(d,a){return a.reduce(function(a,c){a[c]=!0;return a},d)},{})};k.apply=function(d,a,b){return g.call("string"===typeof a?d[a]:
a,d,b)};var r=k.camelCase=function(d){"string"!==typeof d&&(d+="");return d[0].toLowerCase()+d.slice(1)},e=k.keysToCamelCase=function(d){if(Array.isArray(d))return d.map(e);if("object"!==typeof d||"[object Object]"!==d.toString())return d;var a={};o(d,function(b,c){a[r(c)]=e(b);return!1});return a};k.capitalize=function(d){return d[0].toUpperCase()+d.slice(1)};k.log=function(){console.log.apply(console,arguments)};k.inherits=function(d,a,b){d.prototype=new a;d.prototype.constructor=d;a.prototype.super_=
a;i(d.prototype,b)}});w("att/constants",["require","exports","module","att/util"],function(j,k){var o=j("att/util").copyObjTo;k.header={accept:{JSON:"application/json",XML:"application/xml",URL_ENCODED:"application/x-www-form-urlencoded"}};k.paramKey={HEADERS:"headers",QUERY:"query",URL_PARAMS:"urlParams",FILE_PATH:"filePath",BODY:"body",ATTACHMENTS:"attachments",OPTIONS:"options"};k.attachmentKeys={BODY:"body",FILE_PATH:"filePath",MIME_TYPE:"mimeType",NAME:"name",ENCODING:"fileEncoding"};k.header.contentType=
o({},k.header.accept)});w("att/ajax",["require","exports","module","att/util","att/constants"],function(j,k,o){function i(g,e,d){g={error:{type:g,message:e}};q.copyObjTo(g.error,d);return g}function l(r,e,d){function a(a){var c=m[a];void 0!==typeof c&&(h[a]=c)}function b(a,c){l||(j(),o&&clearTimeout(o),l=!0,a.call(h,c,h))}function c(){var a=h.getResponseHeader("Content-Type");return a&&0<=a.indexOf(p.header.contentType.JSON)?JSON.parse(m.responseText):m.responseText}if(r.isBridgeFunction||n.settings.isBridgeFunction(r))n.settings.bridgeFunction.call(this,
r,e,d);else{var h=this,m=n.settings.getXHR(r);if(m){this.xhr=m;var j=function(){f.forEach(a);m.readyState>=m.HEADERS_RECEIVED&&g.forEach(a)};j();var k=q.copyObjTo({},r.headers),l=!1,o,w=function(a){var h;try{h=c()}catch(e){}h||(h=m.responseText);a=i("AttXHRRequestError",a.error||m.statusText||"Connection Error",{status:m.status});h&&(a.data=h);b(d,a)};m.onload=function(a){if(400<=m.status)w.call(this,a);else{var h;try{h=c()}catch(u){a=i(u.constructor.name,u.message,{source:u});a.error.type="AttXHRParseError";
b(d,a);return}b(e,{data:h})}};m.onerror=w;m.onabort=function(){o&&b(d,i("AttXHRAbortError","Request aborted"))};m.readystatechange=j;var u=r.url;if(r.query){var v=r.query,x=typeof v;(v="object"===x?s.stringify(v):"string"===x?v:!1)&&(u+="?"+v)}m.open(r.method,u,!0);q.forEach(k,function(a,c){a&&m.setRequestHeader(c,a)});m.timeout=void 0!==r.timeout?r.timeout:n.settings.timeout;u=r.body;if("object"===typeof u)switch(k["Content-Type"]){case p.header.contentType.JSON:u=JSON.stringify(r.body);break;case p.header.contentType.URL_ENCODED:u=
s.stringify(r.body)}m.send(u)}}}var q=j("att/util"),s=q.qs,p=j("att/constants"),f=["readyState","responseText","responseData","responseType"],g=["status","statusText"],n;["abort","getResponseHeader","getAllResponseHeaders"].forEach(function(g){l.prototype[g]=function(){var e=this.xhr;return q.apply(e,e[g],arguments)}});n=function(g,e,d){return new l(g,e,d)};n.settings={getXHR:function(){throw Error("XMLHttpRequest is not defined. Override ajax.settings.getXHR to use the ajax function for this platform");
},timeout:9E4,isBridgeFunction:function(){return!1},bridgeFunction:function(){throw Error("This method is not supported in this platform");}};o.exports=n});w("att/RESTfulDefinition",["require","exports","module","att/util","att/constants"],function(j,k,o){function i(g){l(this,g)}var k=j("att/util"),l=k.copyObjTo,q=k.forEach,s=k.buildParams,p=k.qs,f=j("att/constants");l(i.prototype,{addDefinition:function(g,f){if(!(f instanceof i)&&"function"!==typeof f)throw Error("Only RESTfulDefinition or ATTMethod can be added with this method");
var j=g.split("."),e=j.pop(),d=this;j.forEach(function(a){d[a]||(d[a]=new i);d=d[a]});q(f.methods,function(a,b){f.addMethod(b,a.executor,a)});delete f.methods;d[e]=f;f.parent=this},addMethod:function(g,f,j){function e(a,b,c){3>arguments.length&&(c=b,b=a,a={});return e.parent.executor(e,a,b,c)}if(3>arguments.length&&"object"===typeof f)var d=j,j=f,f=d;l(e,j,i.prototype,i.defaultMethodParams);e.executor=f;e.methodName=g&&g.match(/\.?([^.]*)$/)[1];this.addDefinition(g,e)},forEachToRoot:function(g,f){var i=
this,e=0,d=f||this;do g.call(d,i,e++),i=i.parent;while(i)},getUrl:function(g){var i=(this.parent?this.parent.getUrl():"")+(this.appendUrl||"");if(g)var j=this.getUrl.paramsRegex,e=s(this.inferUrlParamsConfig(),g[f.paramKey.URL_PARAMS],g),i=i.replace(j,function(d,a,b,c){d=e[b];return c&&!d?"":a+d});return i},getHeaders:function(g){return s(this.getHeaderConfig(),g[f.paramKey.HEADERS],g)},getQueryString:function(g){return p.buildFromConfig(this.getQueryStringConfig(),g[f.paramKey.QUERY],g)},getRoot:function(){var g;
this.forEachToRoot(function(f){g=f});return g},executor:function(){if(this.parent)return this.parent.executor.apply(this.parent,arguments)},inferUrlParamsConfig:function(){var g=this.getUrl.paramsRegex,f={};this.getUrl().replace(g,function(g,e,d,a){f[d]=!a;return""});return l(f,this.getUrlParamsConfig())}});["headerConfig","queryStringConfig","urlParamsConfig"].forEach(function(g){var f="get"+g[0].toUpperCase()+g.substr(1);i.prototype[f]=function(){return!this.parent?this[g]:l({},this.parent[f].apply(this.parent,
arguments),this[g])}});i.prototype.getUrl.paramsRegex=/(\/):([^\/?]*)(\?$)?/g;i.defaultMethodParams={};o.exports=i});w("att/main","require,exports,module,att/ajax,att/util,att/constants,att/RESTfulDefinition".split(","),function(j,k,o){function i(a){return{type:a.constructor.name,message:a.message,source:a}}function l(a,c){var b={error:i(a)};c(b);return b}function q(a,c){var h=a[b.attachmentKeys.BODY],d=a[b.attachmentKeys.FILE_PATH];if(h&&d)throw Error('Both "'+b.attachmentKeys.BODY+'" and "'+b.attachmentKeys.FILE_PATH+
'" cannot both be defined '+c?"in an attachment":"in the parameters");if(c&&!h&&!d)throw Error('Either "'+b.attachmentKeys.BODY+'" or "'+b.attachmentKeys.FILE_PATH+'" must be defined in all attachments');}function s(a){d(this,a)}function p(a){d(this,a)}function f(a){d(this,a)}function g(a){var c={},b={};a.split(",").forEach(function(a){A[a]?b[a]=!0:c[a]=!0});return{accessTokenScope:Object.keys(c).sort().join(","),userAuthTokenScope:Object.keys(b).sort().join(",")}}function n(c){return"string"===typeof c?
c:a.stringify(c,",")}var r=j("att/ajax"),e=j("att/util"),d=e.copyObjTo,a=e.qs,b=j("att/constants"),c=j("att/RESTfulDefinition"),h=o.exports=new c({executor:function(a,c,e,g){function f(a){return function(){a&&a.apply(this,arguments);delete j.active}}function m(a){j.error=i(a);g(j.error)}var j={},k=this.getRoot(),n=function(i){var k,n,l;try{var o=c[b.paramKey.QUERY];k=a.getHeaders(c);n="string"===typeof o?o:a.getQueryString(c);l=a.getUrl(c);var y=c[b.paramKey.ATTACHMENTS];y&&y.forEach(function(a){q(a,
!0)});q(c)}catch(p){p.message+=". Check inputted "+(void 0===k)?"header ":void 0===n?"query string ":void 0===l?"url parameters ":'values for method "'+a.methodName+'"';m(p);return}if(i)k.Authorization="Bearer "+i.data.token;else if(!a.tokenType===h.TokenType.NONE){m(Error("Missing access token for this request, fetch a new one"));return}i=d({method:a.method,url:l},c);n&&(i.query=n);i.headers=k;k=a.executor?a.executor(i,c,e,g):i;k===i?(i.methodName=a.methodName,i.useBridge=a.useBridge,j.active=r(i,
f(i.success||e),f(i.fail||g))):k instanceof Error?m(k):(k&&"[object Object]"===k.constructor.toString()?d(j,k):j.data=k,e({data:k}))};switch(a.tokenType){case h.TokenType.NONE:n();break;case h.TokenType.USER:k.userAuthToken.fetch(f(n),f(g));break;default:k.accessToken.fetch(f(n),f(g))}return j}});(function(){var a,c;h.setProtocol=function(b){a=b;h.appendUrl=(a||"")+(c||"")};h.getProtocol=function(){return a};h.setDomain=function(b){c=b;h.appendUrl=(a||"")+(c||"")};h.getDomain=function(){return c}})();
h.setProtocol("https://");h.setDomain("api.att.com");h.TokenType={NONE:"noToken",ACCESS:"accessToken",USER:"userAuthToken"};c.defaultMethodParams.tokenType=h.TokenType.ACCESS;var m,y,z,w,B,A={IMMN:!0,MIM:!0,TL:!0};h.addDefinition("OAuth",new c({appendUrl:"/oauth",methods:{getAccessToken:{appendUrl:"/access_token",method:"POST",tokenType:h.TokenType.NONE,headerConfig:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},executor:function(c,b,h,d){b=c.body;"string"===typeof b&&
(b=a.parse(b));if(!m&&!b.client_id||!y&&!b.client_secret)return l(Error("App Key or Secret are undefined. Set the keys recieved from developer.att.com"),d);b.client_id=m;b.client_secret=y;c.body=a.stringify(b);return c}},obtainEndUserAuthorization:{method:"GET",appendUrl:"/authorize",tokenType:h.TokenType.NONE,queryStringConfig:{client_id:{required:!0,backup:function(){return m}},scope:{required:!0,backup:function(){return w}},redirect_uri:!1},executor:function(a){return{uri:a.url+"?"+a.query}}}}}));
tokenObjProto=s.prototype;d(tokenObjProto,{fetch:function(a,c,b){if(2===arguments.length)var d=b,b=c,c=a,a=d;var d={},e=this;if(this.isExpired())d.grant_type="refresh_token",d.refresh_token=this.refreshToken;else{if(this.token)return d={data:this.getCache()},c.call(this,d),d;try{this.formatParameters(d,a)}catch(g){return l(g,b)}}var f={appKey:m,accessTokenScope:z,userAuthScope:w},d=h.OAuth.getAccessToken({body:d},function(a,b){delete e.fetching;if(a.data.error)failCB.call(this,{error:{type:"AuthorizationError",
message:a.data.error}});else{var d=e.formatResponse(f,a.data);e.save(d);c&&c.call(e,{data:e.getCache()},b)}},function(a,c){delete e.fetching;b&&b.apply(e,arguments)});d.active&&(this.fetching=d.active);return d},refresh:function(a,c){if(!this.refreshToken)return l(Error("Fetch a token before you can refresh it"),c);this.expiration=Date.now()-10;return this.fetch(a,c)},formatResponse:function(a,c){var b=parseInt(c.expires_in);return{t:c.access_token,r:c.refresh_token,e:b&&Date.now()+1E3*b,k:a.appKey}},
keys:["token","refreshToken","expiration","key","scope"],clearCache:function(){this.keys.forEach(function(a){delete this[a]},this)},getCache:function(){var a={};this.keys.forEach(function(c){a[c]=this[c]},this);return a},cache:function(a){a.s&&a.k&&(this.token=a.t,this.refreshToken=a.r,this.expiration=a.e,this.key=a.k,this.scope=a.s)},isExpired:function(){return this.refreshToken&&0!==this.expiration&&this.expiration<Date.now()},remove:function(){this.clearCache()},save:function(a){this.cache(a)},
load:function(){}});e.inherits(p,s,{formatParameters:function(a){if(!z)throw Error("Missing scope");a.scope=z;a.grant_type="client_credentials"},formatResponse:function(a,c){var b=tokenObjProto.formatResponse.apply(this,arguments);b.s=a.accessTokenScope;return b},cache:function(a){(!z||a.s===z)&&tokenObjProto.cache.apply(this,arguments)}});h.accessToken=new p;e.inherits(f,s,{formatParameters:function(a,c){a.code="string"===typeof c&&c||B;if(!a.code)throw Error("oAuthCode is "+(null===B?"no longer valid":
"undefined"));a.grant_type="authorization_code"},formatResponse:function(a,c){var b=tokenObjProto.formatResponse.apply(this,arguments);b.s=a.userAuthScope;return b},cache:function(a){(!w||a.s===w)&&tokenObjProto.cache.apply(this,arguments)}});h.userAuthToken=new f;h.setKeys=function(a,c,b){var b=g(b),d=b.accessTokenScope&&h.accessToken.scope!==b.accessTokenScope,e=b.userAuthTokenScope&&h.userAuthToken.scope!==b.userAuthTokenScope;m===a&&y===c&&!d&&!e||((h.accessToken.key!==a||d)&&h.accessToken.clearCache(),
(h.userAuthToken.key!==a||e)&&h.userAuthToken.clearCache(),m=a,y=c,d&&(z=b.accessTokenScope),e&&(w=b.userAuthTokenScope))};h.setOAuthCode=function(a){h.userAuthToken.clearCache();B=a};h.addDefinition("SMS",new c({appendUrl:"/sms/v3/messaging",headerConfig:{Accept:!1},methods:{sendSMS:{appendUrl:"/outbox",method:"POST",headerConfig:{"Content-Type":!0}},getSMSDeliveryStatus:{appendUrl:"/outbox/:smsId",method:"GET"},getSMS:{appendUrl:"/inbox/:registrationId",method:"GET"}}}));h.addDefinition("MMS",new c({appendUrl:"/mms/v3/messaging/outbox",
headerConfig:{Accept:!1},methods:{sendMMS:{method:"POST",headerConfig:{"Content-Type":!0},useBridge:!0},getMMSDeliveryStatus:{method:"GET",appendUrl:"/:mmsId"}}}));(function(){function a(c){return c.url+"?"+c.query}var b={Signature:!0,SignedPaymentDetail:!0,clientid:{backup:function(){return m},required:!0}};h.addDefinition("Payment",new c({appendUrl:"/rest/3/Commerce/Payment",methods:{newSubscription:{appendUrl:"/Subscriptions",method:"GET",tokenType:h.TokenType.NONE,executor:a,queryStringConfig:b},
getSubscriptionStatus:{appendUrl:"/Subscriptions/:idType/:id",method:"GET",headerConfig:{Accept:!1}},getSubscriptionDetails:{appendUrl:"/Subscriptions/:merchantSubscriptionId/Detail/:consumerId",method:"GET",headerConfig:{Accept:!1}},newTransaction:{appendUrl:"/Transactions",method:"GET",tokenType:h.TokenType.NONE,executor:a,queryStringConfig:b},getTransactionStatus:{method:"GET",headerConfig:{Accept:!1},appendUrl:"/Transactions/:idType/:id"},refundTransaction:{appendUrl:"/Transactions/:transactionId",
method:"PUT",headerConfig:{"Content-Type":!0,Accept:!1},queryStringConfig:{Action:!0}},getNotification:{appendUrl:"/Notifications/:notificationId",method:"GET",headerConfig:{Accept:!1}},acknowledgeNotification:{appendUrl:"/Notifications/:notificationId",method:"PUT",headerConfig:{Accept:!1}}}}))})();h.addDefinition("IMMN",new c({appendUrl:"/rest/1/MyMessages",headerConfig:{Accept:!1},methods:{sendMessage:{method:"POST",headerConfig:{"Content-Type":!0},tokenType:h.TokenType.USER,useBridge:!0},getMessageHeaders:{method:"GET",
tokenType:h.TokenType.USER,queryStringConfig:{HeaderCount:!0,IndexCursor:!1}},getMessageContent:{method:"GET",tokenType:h.TokenType.USER,appendUrl:"/:messageId/:partNumber?"}}}));h.addDefinition("CMS",new c({appendUrl:"/rest/1/Sessions",headerConfig:{"Content-Type":!0,Accept:!1},methods:{createSession:{method:"POST"},sendSignal:{method:"POST",appendUrl:"/:cmsId/Signals"}}}));h.addDefinition("Location",new c({appendUrl:"/2/devices/location",methods:{getDeviceLocation:{method:"GET",tokenType:h.TokenType.USER,
headerConfig:{Accept:!1},queryStringConfig:{requestedAccuracy:!1,Tolerance:!1,acceptableAccuracy:!1}}}}));h.addDefinition("Speech",new c({appendUrl:"/speech/v3/"}));h.Speech.addMethod("speechToText",null,{appendUrl:"speechToText",method:"POST",headerConfig:{Accept:!1,"Content-Type":!0,"Transfer-Encoding":!1,"X-SpeechContext":!1,"X-SpeechSubContext":!1,"Content-Language":!1,"Content-Length":!1,"X-Arg":{postProcess:n}},useBridge:!0});h.Speech.addMethod("textToSpeech",null,{appendUrl:"textToSpeech",
method:"POST",headerConfig:{Accept:!1,"Content-Type":!0,"Content-Language":!1,"Content-Length":{backup:function(a){return a.body.length}},"X-Arg":{postProcess:n}},useBridge:!0});h.Speech.addMethod("speechToTextCustom",null,{appendUrl:"speechToTextCustom",method:"POST",headerConfig:{Accept:!1,"Content-Type":"multipart/x-srgs-audio","Transfer-Encoding":!1,"X-SpeechContext":!1,"Content-Language":!1,"Content-Length":!1,"X-Arg":{postProcess:n}},useBridge:!0});h.addDefinition("Notary",new c({appendUrl:"/Security/Notary/Rest/1/SignedPayload",
methods:{signedPayload:{method:"POST",headerConfig:{Accept:!1,"Content-Type":!0,Client_id:!0,Client_secret:!0},executor:function(a,c){var d=h.accessToken.token;d&&c.headers["Content-Type"]===b.header.contentType.JSON&&e.getFromObject(c,"body.MerchantPaymentRedirectUrl")&&(c.body.MerchantPaymentRedirectUrl+="?token="+d);return a}}}}));return h});w("att/ajax.mime",["att/util"],function(j){var k,o;function i(f,g,i){this.content=g;this.headers=s({},i);this.headers[k]||(this.headers[k]="form-data");this.setName(f)}
function l(f){this.boundary="attboundary"+Math.random().toString().slice(2);f=this.headers=s({},f);f[o]||(f[o]="multipart/form-data");f[o]+='; boundary="'+this.boundary+'"';this.parts=[]}var q=j.forEach,s=j.copyObjTo,p=j.capitalize;o="Content-Type";k="Content-Disposition";j={setHeader:function(f,g){this.headers[f]=g},getHeaderString:function(){var f="";q(this.headers,function(g,j){f+=j+": "+g+i.CRLF});return f+i.CRLF},getHeaderBuffer:function(){return Ti.createBuffer({value:this.getHeaderString()})},
toString:function(){return this.getHeaderString()+this.getContentString()+i.CRLF},toBuffer:function(){var f=this.getHeaderBuffer();f.append(this.getContentBuffer());return f}};i.CRLF="\r\n";i.buildFromJSON=function(f){var g=f.fileName||f.filePath&&f.filePath.replace(/.*\/(.*)/,function(d,a){return a}),j=f.name||g,k;f.body?k=Ti.createBuffer({value:f.body}):f.filePath&&(k=Titanium.Filesystem.getFile(f.filePath),k=Ti.Stream.readAll(Ti.Stream.createStream({source:k.read(),mode:Titanium.Stream.MODE_READ})));
var e={};e[o]=f.mimeType;f.encoding&&(e["Content-Transfer-Encoding"]=f.encoding);f=new i(j,k,e);(f.fileName=g)&&f.setFilename(g);return f};s(i.prototype,{getContentString:function(){return this.content.toString()},getContentBuffer:function(){return this.content}},j);["name","filename"].forEach(function(f){var g=p(f),j=f+'="',l="REGEX_"+f.toUpperCase();i[l]=RegExp(";\\s*"+j+'([^"]*)"');i.prototype["set"+g]=function(e){var d=this.headers[k],a=i[l],d=d.match(a)?d.replace(a,function(a,c){return a.replace(j+
c,j+e)}):d+("; "+j+e+'"');this.headers[k]=d};i.prototype["get"+g]=function(){var e=this.headers[k];return(e=e&&e.match(i[l]))&&e[1]}});l.DASHES="--";l.CRLF=i.CRLF;l.buildFromJSON=function(f){var g=new l(f.headers);f.attachments.forEach(function(f){g.addBodyPartFromJSON(f)});return g};s(l.prototype,{addBodyPart:function(f){this.parts?this.parts.push(f):this.parts=[f]},addBodyPartFromJSON:function(f){this.addBodyPart(i.buildFromJSON(f))},setMainPart:function(f){this.mainPart=f},getContentString:function(){function f(f){f&&
(g+=l.DASHES+i+l.CRLF,g+=f.toString()+l.CRLF)}var g="",i=this.boundary;f(this.mainPart);this.parts&&this.parts.forEach(f);return g+=l.DASHES+i+l.DASHES+l.CRLF},getContentBuffer:function(){function f(f){f&&(g.append(Ti.createBuffer({value:l.DASHES+i+l.CRLF})),g.append(f.toBuffer()),g.append(Ti.createBuffer({value:l.CRLF})))}var g=Ti.createBuffer(),i=this.boundary;f(this.mainPart);this.parts&&this.parts.forEach(f);g.append(Ti.createBuffer({value:l.DASHES+i+l.DASHES+l.CRLF}));return g}},j);return{AttMimeBody:l,
AttBodyPart:i}});A(["att/main","att/util","att/ajax","att/constants","att/ajax.mime"],function(j,k,o,i,l){var q="android"===Ti.Platform.osname;k.log=function(){k.apply(Ti.API,"log",arguments)};o.settings.getXHR=function(){var e={};try{return Ti.Network.createHTTPClient(e)}catch(d){}};var s=function(e){return!e||!e.length?[{}]:e.map(function(d){return{fileObject:d.body||void 0,filePath:d.filePath||void 0,fileType:d.mimeType||void 0,fileName:d.name||void 0}})},i=function(e){return{body:e.body||"",contentType:e.headers["Content-Type"],
accept:e.headers.Accept||"",accessToken:e.headers.Authorization,url:e.url,attachments:s(e.attachments)}},p={sendMMS:i,sendMessage:i},f=tiRequire("ti.api.att");o.settings.bridgeFunction=function(e,d,a){var b=e.methodName;if(!q&&"speechToTextCustom"===b)return b=l.AttMimeBody.buildFromJSON(e),e.body=b.getContentBuffer().toBlob(),e.headers=b.headers,delete e.useBridge,o(e,d,a);q||(e=p[b](e));f[b](e,function(a){a=a.success||a;try{a=JSON.parse(a)}catch(b){}d.call(this,{data:a})},a)};o.settings.isBridgeFunction=
function(e){return e.useBridge};["accessToken","userAuthToken"].forEach(function(e){var d=j[e],a="att.token."+e,e=d.constructor.prototype,b=d.remove,c=d.save;e.remove=function(){b.apply(this,arguments);Titanium.App.Properties.removeProperty(a)};e.save=function(b){Titanium.App.Properties.setObject(a,b);c.apply(this,arguments)};e.load=function(){var c=Titanium.App.Properties.getObject(a);c&&this.cache(c)};d.load()});"android"!==Ti.Platform.osname&&(i=j.Speech.speechToText,i.useBridge=!1,i.executor=
function(e,d){try{var a=Ti.Filesystem.getFile(d.filePath);e.body=a.read()}catch(b){return b}return e},i.headerConfig["Content-Length"]={backup:function(e){try{return Ti.Filesystem.getFile(e.filePath).length}catch(d){}}});var g={"audio/x-wav":"wav","audio/amr":"amr","audio/amr-wb":"awb"},n=g["audio/amr-wb"],r=function(e,d,a){var b=e.getResponseHeader("Content-Type"),c=g[b],h="."+(c||n);c&&d.indexOf(h)!==d.length-h.length&&(d+=h);c=Ti.Filesystem.getFile(d);c.write(e.responseData);a({file:c,data:e.responseData,
filePath:d,contentType:b,xhr:e})},i=j.Speech.textToSpeech;i.executor=function(e,d,a){e.success=function(){var b=Array.prototype.slice.call(arguments,0),c=this;r(c,d.responseFilePath,function(d){b[0]={data:d};a&&a.apply(c,b)})};return e};i.useBridge=!1;return j});w("extensions/titanium",function(){});w("wrappers/wrapper-1.0",["att/main","att/constants","att/util"],function(j,k,o){function i(a,b){var c={};if(!a)return c;b&&(c["Content-Type"]=a.contentType);c.Accept=a.accept;return c}function l(a){var b=
a.fileName||void 0;!b&&a.filePath&&(b=a.filePath.match(/.*\/(.*)/)[1]);return{body:a.fileObject||void 0,filePath:a.filePath||void 0,fileName:b,mimeType:a.fileType||void 0,name:b,encoding:a.fileObject?"base64":void 0}}function q(a){return function(b){arguments[0]=JSON.stringify(b);a.apply(this,arguments)}}function s(a,b){return function(c,d,e){e=q(e);a(c,function(a){a&&(arguments[0]=a.data);0<=["newTransaction","newSubscription"].indexOf(b[1])?d.apply(this,arguments):q(d).apply(this,arguments)},e)}}
var p={authorize:function(a,b,c,d,e){j.setKeys(a,b,c);e&&j.setOAuthCode(e)},setAccessToken:function(a,b,c){j.accessToken.token=a;j.accessToken.refresh=b;j.accessToken.expiration=c},getCachedAccessToken:function(){return j.accessToken.token},getCachedUserAuthToken:function(){return j.userAuthToken.token},SMS:{sendSMS:function(a,b,c){j.SMS.sendSMS({headers:i(a,!0),body:"application/json"===a.contentType.toLowerCase()&&"object"===typeof a.body?JSON.stringify({outboundSMSRequest:a.body}):a.body},b,c)},
getSMSDeliveryStatus:function(a,b,c){j.SMS.getSMSDeliveryStatus({headers:i(a),urlParams:{smsId:a.smsId}},b,c)},getSMS:function(a,b,c){j.SMS.getSMS({headers:i(a),urlParams:{registrationId:a.registrationId}},b,c)}},MMS:{sendMMS:function(a,b,c){var d=a.contentType===k.header.contentType.JSON?'{"outboundMessageRequest":'+("object"===typeof a.body?JSON.stringify(a.body):a.body)+"}":a.body;j.MMS.sendMMS({headers:i(a,!0),body:d,attachments:!a.attachments?void 0:a.attachments.map(l)},b,c)},getMMSDeliveryStatus:function(a,
b,c){j.MMS.getMMSDeliveryStatus({headers:i(a),urlParams:{mmsId:a.id}},b,c)}}};(function(){function a(a){return function(b,d,e){j.Payment[a]({headers:i(b),urlParams:{notificationId:b.notificationId}},d,e)}}var b={Signature:"signature",SignedPaymentDetail:"signedDocument",clientid:"clientId"};p.Payment={newSubscription:function(a,d,e){var f={};o.forEach(b,function(b,d){f[d]=a[b]});j.Payment.newSubscription({query:f},d,e)},getSubscriptionStatus:function(a,b,d){var e;a.subscriptionId?e={idType:"SubscriptionId",
id:a.subscriptionId}:a.merchantTransactionId?e={idType:"MerchantTransactionId",id:a.merchantTransactionId}:a.subscriptionAuthCode&&(e={idType:"SubscriptionAuthCode",id:a.subscriptionAuthCode});j.Payment.getSubscriptionStatus({headers:i(a),urlParams:e},b,d)},getSubscriptionDetails:function(a,b,d){j.Payment.getSubscriptionDetails({headers:i(a),urlParams:{merchantSubscriptionId:a.merchantSubscriptionId,consumerId:a.consumerId}},b,d)},newTransaction:function(a,d,e){var f={};o.forEach(b,function(b,d){f[d]=
a[b]});j.Payment.newTransaction({query:f},d,e)},getTransactionStatus:function(a,b,d){var e;a.transactionId?e={idType:"TransactionId",id:a.transactionID}:a.merchantTransactionId?e={idType:"MerchantTransactionId",id:a.merchantTransactionId}:a.transactionAuthCode&&(e={idType:"TransactionAuthCode",id:a.transactionAuthCode});j.Payment.getTransactionStatus({headers:i(a),urlParams:e},b,d)},refundTransaction:function(a,b,d){j.Payment.refundTransaction({headers:i(a,!0),query:{Action:a.action},urlParams:{transactionId:a.transactionId},
body:a.body},b,d)},getNotification:a("getNotification"),acknowledgeNotification:a("acknowledgeNotification")}})();p.IMMN={sendMessage:function(a,b,c){j.IMMN.sendMessage({headers:i(a,!0),body:a.body,attachment:!a.attachments?void 0:a.attachments.map(l)},b,c)},getMessageHeaders:function(a,b,c){j.IMMN.getMessageHeaders({headers:i(a),query:{HeaderCount:a.headerCount,IndexCursor:a.indexCursor}},b,c)},getMessageContent:function(a,b,c){j.IMMN.getMessageContent({headers:i(a),urlParams:{messageId:a.messageId,
partNumber:a.partNumber}},b,c)}};p.CMS={createSession:function(a,b,c){j.CMS.createSession({headers:i(a,!0),body:a.body},b,c)},sendSignal:function(a,b,c){j.CMS.sendSignal({headers:i(a,!0),urlParams:{cmsId:a.cmsId},body:a.body},b,c)}};p.OAuth={obtainEndUserAuthorization:function(a,b,c){j.OAuth.obtainEndUserAuthorization({headers:i(a),query:{client_id:a.clientId,scope:a.scope,redirect_uri:a.redirectUrl}},b,c)}};p.Location={getDeviceLocation:function(a,b,c){j.Location.getDeviceLocation({headers:i(a),
query:{requestedAccuracy:a.requestedAccuracy,Tolerance:a.tolerance,acceptableAccuracy:a.acceptableAccuracy}},b,c)}};p.Speech={speechToText:function(a,b,c){j.Speech.speechToText({headers:{Accept:a.accept,"Content-Type":a.contentType,"Transfer-Encoding":a.transferEncoding,"X-SpeechContext":a.xSpeechContext,"X-SpeechSubContext":a.xSpeechSubContext,"Content-Language":a.contentLanguage,"Content-Length":a.contentLength,"X-Arg":a.xArg||a.xarg},filePath:a.filePath},b,c)}};p.Speech=p.Speech||{};p.Speech.textToSpeech=
function(a,b,c){j.Speech.textToSpeech({headers:{Accept:a.accept,"Content-Type":a.contentType,"Content-Language":a.contentLanguage,"Content-Length":a.contentLength,"X-Arg":a.xArg},responseFilePath:a.filePath,body:a.body},b,c)};var f={wav:"audio/wav",amr:"audio/amr",awr:"audio/amr-wb"};p.Speech=p.Speech||{};var g=["dictionary","grammar","grammar-prefix","grammar-altgram"],n={};g.forEach(function(a){var b="x-"+a,c="dictionary"===a?"pls":"srgs",d="application/"+c+"+xml";n[a]=function(a){if(a){var e={name:b,
mimeType:d};if("string"===typeof a)var f=a.match(/.*\.(.*)/),a=!f||f[1]!==c?{body:a}:{filePath:a};a.body?(e.body=a.body,a.filePath&&(e.fileName=a.filePath.match(/(.*\/|^)(.*)/)[2]),a.encoding&&(e.encoding=a.encoding)):e.filePath=a.filePath;return e}}});var r=p.Speech.speechToTextCustom=function(a,b,c){var d=[],e=a.options||{},f=e.emma;g.forEach(function(b){var c=b.replace(/-[a-z]/,function(a){return a[1].toUpperCase()});(b=n[b](a[c]))&&d.push(b)});if(!a.audioFile)throw Error('missing required parameter "audioFile"');
d.push(r.handleAudioFile(a.audioFile));j.Speech.speechToTextCustom({headers:{Accept:f?"application/emma+xml":"application/json","X-SpeechContext":e.strict?"GrammarList":"GenericHints","Content-Language":a.language,"X-Arg":a.xArg},attachments:d},b&&function(a,c){b.call(this,a.data,c)},c)};r.handleAudioFile=function(a){var b,c,d;"string"===typeof a?b=a:(b=a.filePath,c=a.type,d=a.encoding);!c&&b&&(c=b.match(/.*\.(.*)/),c=f[c&&c[1]]);d={mimeType:c,name:"x-voice",encoding:d};a.body?(d.fileName=b&&b.match(/(.*\/|^)(.*)/)[2],
d.body):d.filePath=b;return d};p.Notary={signedPayload:function(a,b,c){j.Notary.signedPayload({headers:{Accept:a.accept,"Content-Type":a.contentType,Client_id:a.clientId,Client_secret:a.clientSecret},body:a.data},b,c)}};var e={speechToTextCustom:!0},d={accessToken:!0,userAuthToken:!0};o.forEach(p,function(a,b){"object"!==typeof a||d[b]||o.forEach(a,function(c,d){"function"!==typeof c||e[d]||(a[d]=s(c,[b,d]))})});return p});var C=A;C("extensions/titanium");return C("wrappers/wrapper-1.0")}();